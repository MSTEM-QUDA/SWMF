#ECHO
T

#DESCRIPTION
Create restart files for GM and IH. IH-GM-IE coupling. Needs user_routines.f\90.heliosphere!

#IDEALAXES
! align both the rotational and the magnetic axes of Earth with ecliptic North

#TIMEACCURATE
F			DoTimeAccurate

#STARTTIME
2002		year
10		month
1		day
0		hour
0		minute
0		second
0.0 		FracSecond

! Do not run IE until GM gets some reasonable solution
#COMPONENT
IE			NameComp
F			UseComp

#COUPLE1
IH			NameSource
GM			NameTarget
1			DnCouple
10.			DtCouple

#BEGIN_COMP IH ---------------------------------------------------------------

#PROBLEMTYPE
3			problem_type: 3=Solar Wind and Inner Heliosphere

#HELIOSPHERE
2.85E+06		Tsun    [K]      1.0E6 
1.50E+14		NDsun [n/m-3]
25.00			Qsun
1.75			Theat
1.00			Rheat
4.50			SIGMAheat
F                       UseUserPerturbation

! We use the extra source terms and inner boundary conditions defined
! in user_routines.f90.heliosphere

#USER_FLAGS
T                       UseUserInnerBcs
T                       UseUserSource
F                       UseUserPerturbation
F                       UseUserOuterBcs
F                       UseUserICs
F                       UseUserSpecifyRefinement
F                       UseUserLogFiles
F                       UseUserWritePlot
F                       UseUserAMR
F                       UseUserEchoInput
F                       UseUserB0
F                       UseUserSetPhysConst
F                       UseUserUpdateStates

#USERINPUTBEGIN

#USEUSERHEATING
T

#USERINPUTEND

#SOLARWIND
5.0                     SW_rho_dim [n/cc]    \
181712.175              SW_T_dim [K]          | Standard GGCM
-400.0                  SW_Ux_dim [km/s]      |   5nT South
0.0                     SW_Uy_dim [km/s]      |
0.0                     SW_Uz_dim [km/s]      |
0.0                     SW_Bx_dim [nT]        |
0.0                     SW_By_dim [nT]        |
-5.0                    SW_Bz_dim [nT]       /

#HELIODIPOLE
-3.0			HelioDipoleStrength(equatorial field strength in Gauss)
 0.0			HelioDipoleTilt

#HELIOTEST
F                       DoSendMHD. Overwrite IH data with IMF.dat when false

#GRID
1			proc_dims(1)
1			proc_dims(2)
1			proc_dims(3),
-256.0			x1  
 256.0			x2  
-256.0			y1 
 256.0			y2 
-256.0			z1 
 256.0			z2 

#OUTERBOUNDARY
float			TypeOuterBC(east_)
float			TypeOuterBC(west_)
float			TypeOuterBC(south_) 
float			TypeOuterBC(north_) 
float			TypeOuterBC(bot_)  
float			TypeOuterBC(top_) 

#AMRINIT
default			InitialRefineType
9			nLevelInitialRefine

#TIMESTEPPING
2			nStage
0.8			CflExpl

#UPSTREAM_INPUT_FILE
T                       UseUpstreamInputFile
IMF.dat                 UpstreamFileName
0.0                     SatelliteYPos
0.0                     SatelliteZPos

#SAVELOGFILE
T			DoSaveLogfile
RAW			StringLogfile
1			DnSaveLogfile
-1.			DtSaveLogfile

#SAVEPLOT
2                       nPlotFiles
x=0 MHD tec             StringPlot
1000                    DnOutput(plot_+3)
-1.			DtOutput
y=0 MHD idl             StringPlot
1000                    DnOutput(plot_+3)
-1.			DtOutput
-1.			DxOutput

#END_COMP IH -----------------------------------------------------------------

#BEGIN_COMP GM ---------------------------------------------------------------

#PROBLEMTYPE
11			problem_type: 11=Earth Magnetosphere

!- Normal SolarWind with 5nT for Earth Magnetosphere

#SOLARWIND
5.0			SW_rho_dim [n/cc]    \
181712.175		SW_T_dim [K]          | Standard GGCM
-400.0			SW_Ux_dim [km/s]      |   5nT South
0.0			SW_Uy_dim [km/s]      |
0.0			SW_Uz_dim [km/s]      |
0.0			SW_Bx_dim [nT]        |
0.0			SW_By_dim [nT]        |
-5.0			SW_Bz_dim [nT]       /

#GRID
2			nRootBlock_D(x_)
1			nRootBlock_D(y_)
1			nRootBlock_D(z_)
-224.			x1
 32.			x2
-64.			y1
 64.			y2
-64.			z1
 64.			z2

#MAGNETOSPHERE
T                       body1
2.5                     Rbody
3.5                     Rcurrents
100.0                   Magneto_rho_dim (/ccm) density for fixed BC for rho_BLK
50000.0                 Magneto_T_dim (K) temperature for fixed BC for P_BLK

#SAVELOGFILE
T			DoSaveLogfile
RAW			StringLogfile
1			DnSaveLogfile
-1.			DtSaveLogfile

#SAVEPLOT
2                       nPlotFiles
y=0 MHD idl             StringPlot
1000                    DnSavePlot
-1.			DtSavePlot
-1.			Dx
z=0 MHD idl             StringPlot
1000                    DnSavePlot
-1.			DtSavePlot
-1.			Dx

!- PARAMETERS for Smart Steady State Startup --

#TIMESTEPPING
1			nStage
0.80			CflExlp

#AMRINIT
default			TypeInitialRefine
4			nInitialRefineLevels

#OUTERBOUNDARY
outflow			TypeBC_I(east_)
coupled			TypeBC_I(west_)
float			TypeBC_I(south_)
float			TypeBC_I(north_)
float			TypeBC_I(bot_)
float			TypeBC_I(top_)

#SCHEME
1			nOrder
Rusanov			TypeFlux

#SAVEPLOTSAMR
T			DoSavePlotsAmr to save plots before each AMR

#AMR
300			DnRefine
F			DoAutomaticRefinement 

#END_COMP GM -----------------------------------------------------------------

#STOP
500                     MaxIter
-1.			TimeMax

#RUN	######################################################################

#BEGIN_COMP IH ---------------------------------------------------------------

! Switch to a more accurate solver

#SCHEME
2			nOrder
Linde			TypeFlux
minmod                  TypeLimiter

#END_COMP IH -----------------------------------------------------------------

#BEGIN_COMP GM ---------------------------------------------------------------

#SAVEPLOTSAMR
F			DoSavePlotsAmr to save plots before each AMR

#AMR
-1			DnRefine

#SCHEME
2			nORDER
2			TypeFlux
minmod                  TypeLimiter

#END_COMP GM -----------------------------------------------------------------

#STOP
1000                    MaxIter
-1.			TimeMax

#RUN #########################################################################

#COMPONENT
IE			NameComp
T			UseComp

#COUPLE2
IE			NameSource
GM			NameTarget
100                     DnCoupleIe
5.0                     DtCoupleIe

#BEGIN_COMP IE ---------------------------------------------------------------

#IONOSPHERE
0                       TypeConductanceModel
F                       UseFullCurrent
F			UseFakeRegion2
150.0                   F107Flux
4.0                     StarLightPedConductance
0.0                     PolarCapPedConductance

#IE_SAVEPLOT
1			nPlotFile
min idl                 StringPlot
1000                    DnSavePlot
-1.			DtSavePlot

#END_COMP IE -----------------------------------------------------------------

#BEGIN_COMP GM ---------------------------------------------------------------

#TIMESTEPPING
1			nSTAGE
0.65			cfl

#BORIS
T                       boris_correction
0.005                   boris_cLIGHT_factor

#END_COMP GM -----------------------------------------------------------------

#STOP
2000			MaxIter
-1.			TimeMax

#END
