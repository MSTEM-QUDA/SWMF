#ECHO
T

#COMPONENT
GM                      NameComp
T                       UseComp

#COMPONENT
PC                      NameComp
T                       UseComp

#TIMEACCURATE
T			DoTimeAccurate

#PROGRESS
1			DnShowProgressShort
1			DnShowProgressLong

#BEGIN_COMP GM ---------------------------------------------------------------

#USERMODULE
Waves and GEM, Yingjuan Ma
 1.30                  VersionUserModule

#CHECKGRIDSIZE
       8                              nI
       8                              nJ
       1                              nK
     100                     MinBlockALL

#IOUNITS
NONE			TypeIoUnit

#NORMALIZATION
NONE			TypeNormalization

#PLASMA
1.0             FluidMass [amu]
1.0             IonCharge [e]  
0.5             ElectronTemperatureRatio


#NONCONSERVATIVE
T               UseNonConservative


#UNIFORMSTATE
1.0			Rho
0.0			Ux
0.0			Uy
0.0			Uz
0.0			Bx
0.04			By
0.0			Bz
4.5e-4			Ppar
4.5e-4			p

rho   = 1
By    = 0.04
cA    = By/sqrt(rho)   = 0.04
cS    = sqrt(2*p/rho)  = 0.03
cF    = sqrt(cA^2+cS^2)= 0.05
lambda= 32
t     = lambda/(cF) = 640.0

p = pe = 2.25e-4
vth   = sqrt(p/rho) = 0.015
me = mi/25
vthe  = 5*vth       = 0.075 
dx = 0.4
dtmax = dx/vthe     = 5.333
dt    = 0.2*dtmax   = 1.066

#USERINPUTBEGIN ----------------

#WAVE
1			Rho_
1000.0			Width
0.1			Amplitude
32.0			LambdaX
-1.0			LambdaY
-1.0			LambdaZ
0.0			Phase

#WAVE
2			Ux_
1000.0			Width
0.005			Amplitude (rho1/rho0)*cF
32.0			LambdaX
-1.0			LambdaY
-1.0			LambdaZ
0.0			Phase

#WAVE
6			By_
1000.0			Width
0.004			Amplitude (rho1/rho0)*b0
32.0			LambdaX
-1.0			LambdaY
-1.0			LambdaZ
0.0			Phase

#WAVE
8			Ppar_
10000.0			Width
4.5e-5			Amplitude (rho1/rho0)*pPar0
32.0			LambdaX
-1.0			LambdaY
-1.0			LambdaZ
0.0			Phase

#WAVE
9			p_
10000.0			Width
7.5e-5			Amplitude (rho1/rho0)*5/3*p0
32.0			LambdaX
-1.0			LambdaY
-1.0			LambdaZ
0.0			Phase

#USERINPUTEND   ----------------

#SHOCKPOSITION
0.0			ShockPosition
4/3			ShockSlope

#GRID
32                    	nRootBlockX
24                     	nRootBlockY
1                     	nRootBlockZ
-160/3                  xMin
 160/3  		xMax
-160/4                 	yMin
 160/4                 	yMax
-0.5                  	zMin
 0.5                  	zMax

#FIXEDTIMESTEP
T			UseDtFixed
640/500			DtFixed

#PIC
T                       UsePic
2                       nGhostPic
0                       nOverlapPic
F			UseFileCoupling

#PICUNIT
 1.0                    xUnitPicSi
 1.0                    uUnitPicSi

#PICREGION
1                       nPicRegion
-26.458333333           xMinCut
 26.458333333         	xMaxCut
-19.791666667           yMinCut
 19.791666667	     	yMaxCut
1.25/3			DxPic
1.25/3			DyPic

#OUTERBOUNDARY
periodic                TypeBcEast
periodic                TypeBcWest
periodic                TypeBcSouth
periodic                TypeBcNorth
float                   TypeBcBottom
float                   TypeBcTop

#HALLRESISTIVITY
T			UseHallResistFlux
1.0			HallFactor
0.0			HallCmaxFactor

#TEST
init_hall_resist	TestString

#DIVBSOURCE
F			UseB0Source

#SCHEME
2		nOrder
Rusanov		TypeFlux
mc		TypeLimiter
1.5		BetaLimiter

RK
3		nStage
0.8		CflExpl

#TIMESTEPPING
2                       nStage
0.8                     CflExpl

#SAVERESTART
T			DoSaveRestart
2
-1

#SAVELOGFILE
T			DoSaveLogfile
raw			StringLog
1			DnSaveLogfile
-1.			DtSaveLogfile

#SAVEINITIAL
T			DoSaveInitial

#SAVEPLOT
1
z=0 mhd idl             StringPlot
1			DnOutput
-0.05			DtOutput
0.			DxOutput

#END_COMP GM -----------------------------------------------------------------

#BEGIN_COMP PC ---------------------------------------------------------------

#RESTART
F					doRrestart
PC/restartOUT				RestartDirName

#NSYNC
1					nStep between sync


#CASE
BATSRUS					Case
./data/Initial-Fields_000000.h5		FieldsInit
Maxwell					PartInit
default					WriteMethod 
no					PoissonCorrection
Wave					SimulationName
1					verbose
hallmhd					fluidcoupling (only with BATSRUS)
T					use Anisotropic P (only with BATSRUS)

#PARAMS
1.0					th = decentering parameter
1.0					c  = light speed 
0.5					Smooth
0					nSmooth
3.0					NpMaxNpRatio (Maximum number of particles allocated)
0.5					delta

#ELECTRON
-25.0                                  Charge/mass ratio (qom)

#PARTICLES
10					Particles per cell in X
10					Particles per cell in Y
1					Particles per cell in Z

#SOLVER
1.0e-8				CGtol : CG solver stopping criterium tolerance
1.0e-8 					GMREStol : GMRES solver stopping criterium tolerance
3					NiterMover : mover predictor corrector iteration

#SAVEPLOT
PC/plots				SaveDirName
1					FieldOutputCycle
10000					ParticlesOutputCycle
4					RestartOutputCycle
1					DiagnosticsOutputCycle
0					FieldOutputCycleASCII

%%%%%%%%%%%% boundary conditions %%%%%%%%%%%%%%%

    Caveat: if your processor topology is set to be periodic in a direction,
    automatically the boundary condition in that direction will be periodic


    PHI Electrostatic Potential
    0,1 = Dirichilet boundary condition ;
    2   = Neumann boundary condition

    EM field boundary condition
    0 = perfect conductor
    1 = magnetic mirror

    Particles Boundary condition
    0 = exit
    1 = perfect mirror
    2 = riemission

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

#BC
1					bcPHIfaceXright
1					bcPHIfaceXleft
1					bcPHIfaceYright
1					bcPHIfaceYleft
1					bcPHIfaceZright
1					bcPHIfaceZleft 
0					bcEMfaceXright
0					bcEMfaceXleft
0					bcEMfaceYright
0					bcEMfaceYleft
0					bcEMfaceZright
0					bcEMfaceZleft
2					bcPfaceXright
2					bcPfaceXlef
2					bcPfaceYright
2					bcPfaceYleft
2					bcPfaceZright
2					bcPfaceZleft
0					nOverlap  (Only with BATSRUS)
0					nOverlapP (Only with BATSRUS)
10					nCharge   (Only with BATSRUS)
-1					nIsotropic  (Only with BATSRUS)

#END_COMP PC -----------------------------------------------------------------


#COUPLE2
GM			NameComp1
PC			NameComp2
1                       DnCouple
1.28                    Dtcouple

#DESCRIPTION
Run GM and IE in time accurate mode

#PLANET
NONE

#SAVERESTART
T                       DoSaveRestart 
2                       DnSaveRestart 
1.28                     DtSaveRestart

#STARTTIME
2000			iYear
3			iMonth
21			iDay
10			iHour
45			iMinute
0			iSecond
0.0			FracSecond

#IDEALAXES
! align rotation and magnetic axes with z axis

#ROTATION
F			UseRotation

#STOP
-8			MaxIter
5.12			TimeMax


