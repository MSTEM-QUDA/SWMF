This tests GM-PC with identical layouts up on 4 processors,
and different layout when run on different processors.

#COMPONENTMAP
GM  0 -1  1		CompMap runs on all PE-s
PC  0  3  1		PC runs on 4 PE-s

#DESCRIPTION
Param/PARAM.in.test.GMPC.start: Run GM and PC in time accurate mode		StringDescription

#PLANET
NONE			NamePlanet

#TIMEACCURATE
T			IsTimeAccurate

#PROGRESS
1			DnProgressShort
1			DnProgressLong


#COUPLE2
GM			NameComp1
PC			NameComp2
-1			DnCouple
0.5			DtCouple

#COUPLETIME
GM			NameComp
F			DoCoupleOnTime

#BEGIN_COMP GM ---------------------------------------------------------------

#GRIDGEOMETRY
rotatedcartesian		TypeGeometry

USERMODULE
Waves and GEM, Yingjuan Ma
 1.30			VersionUserModule

#CHECKGRIDSIZE
  8			nI
  8			nJ
  1			nK
800			MinBlockALL

#IOUNITS
NONE			TypeIoUnit

#NORMALIZATION
NONE			TypeNormalization

#PLASMA
1.0			FluidMass 1 [amu]
4.0			IonCharge 2 [amu]
1.0			ElectronTemperatureRatio 1 [e]
1.0			IonCharge 2 [e]
1.0			ElectronTemperatureRatio

#NONCONSERVATIVE
T			UseNonConservative

#UNIFORMSTATE
0.5			Rho
0.03			Ux1
0.04			Uy1
0.0			Uz1
0.2			Bx
0.0			By
0.0			Bz
5.12E-4			Pe
2.56e-4			p1
0.5			Rho2
0.03			Ux2
0.04			Uy2
0.0			Uz2
2.56e-4			p2

#USERINPUTBEGIN -----------------------------------

Whistler wave is cirularly polarized
for both ion fluids.

#WAVE
3			UyIon1
10000.0			Width
-0.0090663280		Amplitude  -0.01 for Alfven
32.0			LambdaX
-1.0			LambdaY
-1.0			LambdaZ
-90.0			Phase

#WAVE
4			UzIon1
1000.0			Width
+0.0090663280		Amplitude  +0.01 for Alfven
32.0			LambdaX
-1.0			LambdaY
-1.0			LambdaZ
180.0			Phase

#WAVE
12			UyIon2
10000.0			Width
-0.0090663280		Amplitude  -0.01 for Alfven
32.0			LambdaX
-1.0			LambdaY
-1.0			LambdaZ
-90.0			Phase

#WAVE
13			UzIon2
1000.0			Width
+0.0090663280		Amplitude  +0.01 for Alfven
32.0			LambdaX
-1.0			LambdaY
-1.0			LambdaZ
180.0			Phase

#WAVE
6			By_
1000.0			Width
0.01			Amplitude
32.0			LambdaX
-1.0			LambdaY
-1.0			LambdaZ
-90.0			Phase

#WAVE
7			Bz_
1000.0			Width
-0.01			Amplitude
32.0			LambdaX
-1.0			LambdaY
-1.0			LambdaZ
180.0			Phase

Put perturbations into pressures, but keep
total Pe+Pi1+Pi2 constant

#WAVE
8			Pe_
1000.0			Width
1e-4			Amplitude
32.0			LambdaX
-1.0			LambdaY
-1.0			LambdaZ
180.0			Phase

#WAVE
9			Pion1
1000.0			Width
0.5e-4			Amplitude
32.0			LambdaX
-1.0			LambdaY
-1.0			LambdaZ
0.0			Phase

#WAVE
14			Pion2
1000.0			Width
0.5e-4			Amplitude
32.0			LambdaX
-1.0			LambdaY
-1.0			LambdaZ
0.0			Phase


#USERINPUTEND -------------------------------------

The grid is rotated by atan(3/4), the original shocktube is by -atan(4/3)
so now rotate by tan(atan(3/4)- atan(4/3))) = -7/24
#SHOCKPOSITION
0.0			ShockPosition
-7/24			ShockSlope

#GRID
32			nRootBlock1
24			nRootBlock2
1			nRootBlock3
-160/3			xMin
 160/3  		xMax
-160/4			yMin
 160/4			yMax
-0.5			zMin
 0.5			zMax

#FIXEDTIMESTEP
T			UseDtFixed
0.5			DtFixedDim


#PICUNIT
 1.0			xUnitPicSi
 1.0			uUnitPicSi

#PICGRID
1			nPicRegion
-26.458333333		xMinPic
 26.458333333		xMaxPic
-19.791666667		yMinPic
 19.791666667		yMaxPic
1.25/3			DxPic
1.25/3			DyPic

#OUTERBOUNDARY
periodic		TypeBc1
periodic		TypeBc2
periodic		TypeBc3
periodic		TypeBc4
float			TypeBc5
float			TypeBc6

#HALLRESISTIVITY
T			UseHallResist
1.0			HallFactorMax
0.0			HallCmaxFactor

#TEST
init_hall_resist		StringTest

#DIVBSOURCE
F			UseB0Source

#SCHEME
2			nOrder
Rusanov			TypeFlux
mc			TypeLimiter
1.5			LimiterBeta

RK
3			nStage
0.8			CflExpl

#TIMESTEPPING
2			nStage
0.8			CflExpl

#IMPLICIT
F			UsePointImplicit
F			UsePartImplicit
T			UseFullImplicit
100.0			CflImpl

#SAVELOGFILE
T			DoSaveLogfile
raw			StringLog
1			DnSaveLogfile
-1.			DtSaveLogfile

#SAVEINITIAL
T			DoSaveInitial

#SAVEPLOT
1			nPlotFile
z=0 all idl_ascii		StringPlot
1			DnSavePlot
-0.05			DtSavePlot
0.			DxSavePlot

#END_COMP GM -----------------------------------------------------------------

#BEGIN_COMP PC ---------------------------------------------------------------

#ELECTRON
-100.0			ElectronChargePerMass ratio (qom)


#TIMESTEPPING
F			useSWMFDt
T			useFixedDt
0.5			dt

#DIVE
F			divECleanType

#DISCRETIZATION
0.51			theta
0.1			gradRhoRatio
0.1			cDiff
0.0			DISCRETIZATION


#PARTICLES
10			nParticleX per cell in X
10			nParticleY per cell in Y
1			nParticleZ per cell in Z

#SAVEIDL
2
z=0 fluid ascii si		StringPlot
4			DnOutput
-1			DtOutput
0			DxOutput
cut particles1 ascii planet		StringPlot
4			DnOutput
-1			DtOutput
-1			xMin
3			xMax
0			yMin
2			yMax
-1			zMin
1			zMax
1			DxOutput

#SAVEPLOT
PC/plots		SaveDirName
1			FieldOutputCycle
0			ParticlesOutputCycle
1			DiagnosticsOutputCycle
shdf5			WriteMethod

#END_COMP PC -----------------------------------------------------------------

#STOP
-1			MaxIter
2.0			TimeMax


