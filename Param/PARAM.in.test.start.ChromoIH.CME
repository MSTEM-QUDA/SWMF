For a single-temperature solar wind simulation, configure SWMF with

./Config.pl -v=Empty,SC/BATSRUS,IH/BATSRUS
./Config.pl -o=SC:u=ScChromo,e=MhdWaves
./Config.pl -o=IH:u=ScChromo,e=MhdWaves
./Config.pl -g=SC:6,4,4,400,400,IH:4,4,4,400,1


For a two-temperature solar wind simulation, configure SWMF with

./Config.pl -v=Empty,SC/BATSRUS,IH/BATSRUS
./Config.pl -o=SC:u=ScChromo,e=MhdWavesPe
./Config.pl -o=IH:u=ScChromo,e=MhdWavesPe
./Config.pl -g=SC:6,4,4,400,400,IH:4,4,4,400,1


Begin session: 1

This session generates a high resolution box for the initial CME propagation

#ECHO
T			DoEcho

#DESCRIPTION
Example input file for creating a CME

#TIMEACCURATE
T                       DoTimeAccurate

#STARTTIME
2011			iYear
3			iMonth
7			iDay
19			iHour
40			iMinute
0			iSecond
0.0			FracSecond

#SAVERESTART
T			DoSaveRestart
-1			DnSaveRestart
60.0			DtSaveRestart

#INCLUDE
RESTART.in

#BEGIN_COMP SC --------------------------------------------------------------

#INCLUDE
SC/restartIN/restart.H	

#COORDSYSTEM
HGR			TypeCoordSystem

#PLASMA
1.0			IonMass [amu]
1.0			AverageIonCharge [e]
1.0			ElectronTemperatureRatio

#BODY
T			UseBody
1.0			rBody
1.5e8			BodyNDim
1.5e6			BodyTDim

Below are two ways to provide a potential field source surface (PFSS) solution
as initial and boundary conditon for the magnetic field. The READPOTENTIALFIELD
command is for reading the PFSS solution of the finite difference code FDIPS,
while the MAGNETOGRAM command is for reading the PFSS solution based on
spherical harmonics. These two PFSS solver can be found in the
util/DATAREAD/srcMagnetogram directory of SWMF.

#READPOTENTIALFIELD
T			UseMagnetogram
potentialfield.out	NamePotentialFieldFile
0.0			HeightInnerBc
3.0			UnitB

MAGNETOGRAM
T			UseMagnetogram
1.0			rMagnetogram
2.5			rSourceSurface
0.0			HeightInnerBc
harmonics.dat		NameMagnetogramFile
12			nHeaderLine
0.0			PhiShift
3.0			UnitB

#USECURLB0
T			UseCurlB0
2.5			rCurrentFreeB0

#USER_FLAGS
T			UseUserInnerBcs
F			UseUserSource
F			UseUserPerturbation
T			UseUserOuterBcs
T			UseUserICs
F			UseUserSpecifyRefinement
T			UseUserLogFiles
T			UseUserWritePlot
F			UseUserAMR
F			UseUserEchoInput
F			UseUserB0
T			UseUserInitSession
F			UseUserUpdateStates

#USERINPUTBEGIN ------------------------

The velocity perturbation (DeltaU) is typically chosen in the range of 10 to
15km/s.
#CHROMOBC
1.2e4			DeltaU [m/s]
2e17			nChromoSi [1/m^3]
5e4			tChromoSi [K]

#USERINPUTEND ----------------------------

The value of the reflection coefficient is rather uncertain: 0.01 to 0.1
#CORONALHEATING
alfvenwavedissipation	TypeCoronalHeating
7.5e4			LperpTimesSqrtBSi
0.08			Crefl

#RESISTIVITY
T			UseResistivity
user			TypeResistivity
0.0			Eta0Si     ! not used

#RESISTIVITYOPTIONS
F			UseResistiveFlux
F			UseJouleHeating
T			UseHeatExchange

#HEATCONDUCTION
T			UseHeatConduction
spitzer			TypeHeatConduction

#HEATFLUXREGION
T			UseHeatFluxRegion
5.0			rCollisional
8.0			rCollisionless

#TEST
krylov

#SEMIIMPLICIT
T			UseSemiImplicit
parcond			TypeSemiImplicit

#KRYLOV
gmres			TypeKrylov
nul			TypeInitKrylov
1.0e-5			ErrorMaxKrylov
20			MaxMatvecKrylov

#PRECONDITIONER
left			TypePrecondSide (left, symmetric, right)
bilu			TypePrecond (MBILU)

#RADIATIVECOOLING
T			UseRadCooling

#LOOKUPTABLE
radcool			NameTable
load			NameCommand
SC/Param/RadCoolCorona.dat
ascii			TypeFile

#TRANSITIONREGION
T			DoExtendTransitionRegion
2.2e5			TeModSi
1.0e1			DeltaTeModSi

#FIXAXIS
F			UsePoleDiffusion
T			DoFixAxis
1.3			rFixAxis
1.1			r2FixAxis

#AMRREGION
InnerShell		NameRegion
shell0			TypeRegion
1.0			Radius1
1.7			Radius2

This box needs to be adjusted for the considered CME
#AMRREGION
CMEbox			NameRegion
box_gen			TypeRegion
1.1			xMinBox
100.0			yMinBox
0.0			zMinBox
10.0			xMaxBox
180.0			yMaxBox
80.0			zMaxBox

#AMRCRITERIALEVEL
4			nCriteria
Level			TypeCriteria
4			RefineTo
4			CoarsenTo
Level Innershell	TypeCriteria
5     			RefineTo
5			CoarsenTo
currentsheet		TypeCriteria
0.5			CoarsenLimit
0.5			RefineLimit
5			MaxLevel
Level CMEbox		TypeCriteria
7			RefineTo
7			CoarsenTo

#GRIDLEVEL
7			nLevelArea
initial			NameArea

#DOAMR
T			DoAmr
1			DnAmr
-1.0			DtAmr
T			IsStrictAmr

#TIMESTEPPING
2			nStage
0.8			CflExpl

#SCHEME
2			nOrder (1 or 2)
Sokolov			TypeFlux (Roe, Rusanov, Linde, Sokolov
mc3			TypeLimiter
1.2			LimiterBeta

#NONCONSERVATIVE
T			UseNonConservative

#MESSAGEPASS
all			TypeMessagePass

#RESCHANGE
T			UseAccurateResChange

#SAVELOGFILE
T			DoSaveLogfile
RAW			StringLogfile
1			DnSaveLogfile
-1.			DtSaveLogfile

#INNERBOUNDARY
user			TypeBcInner

#FACEBOUNDARY
-1			MinBoundary
-1			MaxBoundary

#OUTERBOUNDARY
user			TypeBcEast   user for spherical and user_outerbcs
float			TypeBcWest
float			TypeBcSouth
float			TypeBcNorth
float			TypeBcBottom
float			TypeBcTop

#END_COMP SC ----------------------------------------------------------------

#COMPONENT
IH			NameComp
F			UseComp

#STOP
5			MaxIter
-1.0			TimeMax

End session: 1
#RUN ##########################################################################
Begin session: 2

Insert flux rope and use non-conservative for 60 seconds.
The latter avoids that the current dissipation heats the protons.

#BEGIN_COMP SC --------------------------------------------------------------

#DOAMR
F			DoAmr

#USER_FLAGS
T			UseUserInnerBcs
F			UseUserSource
T			UseUserPerturbation
T			UseUserOuterBcs
T			UseUserICs
F			UseUserSpecifyRefinement
T			UseUserLogFiles
T			UseUserWritePlot
F			UseUserAMR
F			UseUserEchoInput
F			UseUserB0
T			UseUserInitSession
F			UseUserUpdateStates

#CME
T			UseCme
T			DoAddFluxRope
155.0			LongitudeCme
27.0			LatitudeCme
180.0			OrientationCme
TD			TypeCme
-2.0E+12		Current
6.0E+7			RadiusMajor
9.0E+6			RadiusMinor
-1.5E+7			Depth
1.0E+13			Mass

The following ensures a positive experience
#MINIMUMPRESSURE
1E-9			pMinDim

#SAVEPLOT
4			nPlotFiles
x=0 VAR idl		StringPlot
-1  			DnSavePlot
60.			DtSavePlot
-1.0			DxSavePlot
rho ux uy uz ti te bx by bz I01 I02 p
g rbody
y=0 VAR idl		StringPlot
-1  			DnSavePlot
60.			DtSavePlot
-1.0			DxSavePlot
rho ux uy uz ti te bx by bz I01 I02 p
g rbody
z=0 VAR idl		StringPlot
-1  			DnSavePlot
60.			DtSavePlot
-1.0			DxSavePlot
rho ux uy uz ti te bx by bz I01 I02 p
g rbody
3d VAR tec		Stringplot
-1			DnSavePlot
60.			DtSavePlot
rho ux uy uz ti te bx by bz I01 I02 p
g rbody

#SAVEINITIAL
T			DoSaveInitial

#END_COMP SC ----------------------------------------------------------------

#STOP
-1			MaxIter
60.0			TimeMax

End session: 2
#RUN ##########################################################################
Begin session: 3

Switch to conservative for shock-capturing

#NONCONSERVATIVE
F			UseNonConservative

#USER_FLAGS
T			UseUserInnerBcs
F			UseUserSource
F			UseUserPerturbation
T			UseUserOuterBcs
T			UseUserICs
F			UseUserSpecifyRefinement
T			UseUserLogFiles
T			UseUserWritePlot
F			UseUserAMR
F			UseUserEchoInput
F			UseUserB0
T			UseUserInitSession
F			UseUserUpdateStates

#SAVEINITIAL
F			DoSaveInitial

#END_COMP SC ----------------------------------------------------------------

#STOP
-1			MaxIter
120.0			TimeMax

End session: 3
