#ECHO
T			DoEcho

#DESCRIPTION
Short coupling test for IH-GM-IM-IE-UA starting from restart.

#PLANET
EARTH                   NamePlanet

#STARTTIME
    2002                iYear
      10                iMonth
       1                iDay
       0                iHour
       0                iMinute
       0                iSecond
 0.000000000000         FracSecond

! This is a restart from a 2000-step steady state run

#NSTEP
    2000                nStep

#TIMESIMULATION
 0.00000000E+00         tSimulation

#VERSION
 2.00                   VersionSwmf

#PRECISION
8                       nByteReal

#IDEALAXES
! Align rotational and magnetic axes with Z_GSE

#TIMEACCURATE
T			DoTimeAccurate

#SAVERESTART
F			DoSaveRestart

#COUPLE2
GM			NameComp1
IE			NameComp2
-1                      DnCouple
10.                     DtCouple

#COUPLE2
UA			NameComp1
IE			NameComp2
-1                      DnCouple
10.                     DtCouple

#COUPLE2
IM			NameComp1
GM			NameComp2
-1                      DnCouple
35.                     DtCouple

#COUPLE1
IE			NameSource
IM			NameTarget
-1                      DnCouple
35.                     DtCouple

#COUPLE1
IH			NameSource
GM			NameTarget
-1			DnCouple
10.			DtCouple

#BEGIN_COMP IH ---------------------------------------------------------------

#INCLUDE
IH/restartIN/restart.H

#HELIOSPHERE
2.85E+06		tSun  [K]
1.50E+14		NdSun [n/m-3]
25.00			qSun
1.75			tHeat
1.00			rHeat
4.50			SigmaHeat
F                       UseUserPerturbation

#HELIODIPOLE
-3.0E00			HelioDipoleStrength(equatorial field strength in Gauss)
0.0			HelioDipoleTilt

! We use the extra source terms and inner boundary conditions defined
! in user_routines.f90.heliosphere

#USER_FLAGS
T                       UseUserInnerBcs
T                       UseUserSource
F                       UseUserPerturbation
F                       UseUserOuterBcs
F                       UseUserICs
F                       UseUserSpecifyRefinement
F                       UseUserLogFiles
F                       UseUserWritePlot
F                       UseUserAMR
F                       UseUserEchoInput
F                       UseUserB0
F                       UseUserSetPhysConst
F                       UseUserUpdateStates

#USERINPUTBEGIN -------------

#USEUSERHEATING
T

#USERINPUTEND ---------------

#OUTERBOUNDARY
float			TypeBcEast
float			TypeBcWest
float			TypeBcSouth
float			TypeBcNorth
float			TypeBcBottom
float			TypeBcTop

#TIMESTEPPING
2			nStage
0.8			CflExpl

#SCHEME
2			nOrder
Linde			TypeFlux
minmod			TypeLimiter

#SAVELOGFILE
T			DoSaveLogfile
RAW			StringLogfile
1			DnSaveLogfile
-1.			DtSaveLogfile

#SAVEPLOT
3                       nPlotFiles
x=0 MHD idl             StringPlot
-1                      DnSavePlot
60.			DtSavePlot
-1.			DxSavePlot
y=0 MHD idl             StringPlot
-1                      DnSavePlot
10.			DtSavePlot
-1.			DxSavePlot
z=0 MHD idl             StringPlot
-1                      DnSavePlot
60.			DtSavePlot
-1.			DxSavePlot

#END_COMP IH   ---------------------------------------------------------------

#BEGIN_COMP GM ---------------------------------------------------------------

#TEST
ray_trace

#INCLUDE
GM/restartIN/restart.H

#OUTERBOUNDARY
outflow			TypeBcEast
coupled			TypeBcWest
float			TypeBcSouth
float			TypeBcNorth
float			TypeBcBottom
float			TypeBcTop

#TIMESTEPPING
1			nStage
0.65			CflExpl

#BORIS
T                       UseBorisCorrection
0.005                   BorisClightFactor

#IM
0.1                     TauCoupleIm

#SAVELOGFILE
T			DoSaveLogfile
RAW			StringLogfile
1			DnSaveLogfile
-1.			DtSaveLogfile

#SAVEPLOT
2                       nPlotFiles
y=0 MHD idl             StringPlot
-1                      DnSavePlot
10.			DtSavePlot
-1.			DxSavePlot
z=0 MHD idl             StringPlot
-1                      DnSavePlot
10.			DtSavePlot
-1.			DxSavePlot

#END_COMP GM -----------------------------------------------------------------

#BEGIN_COMP UA ---------------------------------------------------------------

! Each block has 18x18 lon and lat cells
! which corresponsd to a 5 by 5 degrees
! resolution with 4 by 2 blocks:

#GRID
4		nBlockLon
2		nBlockLat

#PRESSURE
F		PressureCoordinates
95.0		BaseAlt
500.0		Dz

#FORCING
F		UsePressureGradient
T		UseIonDrag         
F		UseViscosity       
F		UseCoriolis        
F		UseHorAdvection    
F		UseVerAdvection    
F		UseVForce          

#APEX
F		UseApex

#AMIEFILES
SPS
SPS

#F107
150.0			f107
150.0			f107a

#HPI
20.0			HPI

#KP
2.0			kp

#SOLARWIND
0.0			Bx
0.1			By
-3.0			Bz
400.0			Ux

#DT
10.0			Dt

#SAVEPLOTS
10			DnOutput
360			DnRestart
2			nOutputFiles
3DALL			TypeOutput
2D			TypeOutput

#STRETCH
65.0			ConcentrationLatitude [deg]
0.0			StretchingPercentage
1.0			StretchingFactor

#END_COMP UA   ---------------------------------------------------------------

#BEGIN_COMP IE ---------------------------------------------------------------

#IONOSPHERE
5                       conductance_model
F                       UseFullCurrent
F			UseFakeRegion2
150.0                   f107_flux
0.2                     StarLightPedConductance
0.5                     PolarCapPedConductance

#SAVEPLOT
1			nFile
min idl			StringPlot
-1			DnOutput
5.			DtOutput

#SPS
T			UseSPS

#DEBUG
0			iDebugLevel
0			iDebugProc

#END_COMP IE ----------------------------------------------------------------

#STOP
-1			MaxIteration
60.			tSimulationMax

#END
